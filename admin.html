<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Atacadão Pneus</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; background:#f5f5f5; }
h1 { color:#333; }
input, textarea { width:100%; padding:10px; margin:5px 0 10px; border-radius:5px; border:1px solid #ccc; }
button { padding:10px 20px; border:none; border-radius:5px; background:#3483fa; color:#fff; cursor:pointer; margin-top:10px; }
button:hover { background:#2968c8; }
#jsonOutput { width:100%; height:200px; margin-top:10px; }
</style>
</head>
<body>

<h1>Admin - Atacadão Pneus</h1>

<h3>Adicionar Produto</h3>
<input type="text" id="name" placeholder="Nome do Produto">
<input type="text" id="price" placeholder="Preço">
<input type="file" id="imgFile" accept="image/*">
<textarea id="description" placeholder="Descrição"></textarea>
<button onclick="addProduct()">Adicionar Produto</button>

<h3>JSON Atualizado</h3>
<textarea id="jsonOutput" readonly></textarea>

<script>
// URL do JSON no GitHub
const jsonURL = "https://raw.githubusercontent.com/SEU_USUARIO/SEU_REPO/main/produtos.json";

let products = [];
const output = document.getElementById('jsonOutput');

// Carrega produtos já existentes do GitHub
fetch(jsonURL)
  .then(res => res.json())
  .then(data => {
      products = data;
      updateJSON();
  })
  .catch(err => {
      console.warn("Não foi possível carregar produtos do GitHub, começando vazio.", err);
      products = [];
      updateJSON();
  });

function addProduct() {
    const name = document.getElementById('name').value;
    const price = document.getElementById('price').value;
    const description = document.getElementById('description').value;
    const fileInput = document.getElementById('imgFile');
    const file = fileInput.files[0];

    if(name && price && description && file){
        const reader = new FileReader();
        reader.onload = function(e){
            const imgBase64 = e.target.result;
            products.push({name, price, img: imgBase64, description});
            updateJSON();
            document.getElementById('name').value='';
            document.getElementById('price').value='';
            document.getElementById('description').value='';
            fileInput.value = '';
            alert("Produto adicionado! Copie o JSON abaixo e cole no GitHub.");
        }
        reader.readAsDataURL(file);
    } else {
        alert("Preencha todos os campos e selecione uma imagem!");
    }
}

function updateJSON(){
    output.value = JSON.stringify(products, null, 2);
}
</script>

</body>
</html>