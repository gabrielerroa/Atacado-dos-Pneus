<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de JSON - Atacad√£o Pneus</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    margin: 0;
    padding: 0;
  }
  header {
    background: #ffd700;
    color: #000;
    padding: 15px;
    text-align: center;
    font-weight: bold;
  }
  main {
    padding: 20px;
    max-width: 700px;
    margin: auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    margin-top: 5px;
    box-sizing: border-box;
  }
  textarea { resize: vertical; }
  .buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    margin-top: 15px;
    gap: 10px;
  }
  button {
    flex: 1;
    padding: 12px;
    background: #007bff;
    border: none;
    color: white;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
  }
  button:hover { background: #0056b3; }
  .btn-copy { background: #28a745; }
  .btn-copy:hover { background: #1e7e34; }
  .btn-download { background: #17a2b8; }
  .btn-download:hover { background: #117a8b; }
  img {
    display: block;
    margin: 15px auto;
    max-width: 100%;
    border-radius: 8px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
  }
  pre {
    background: #f8f8f8;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    white-space: pre-wrap;
    word-wrap: break-word;
    margin-top: 20px;
  }
  .calc {
    background: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    margin-top: 10px;
    font-size: 15px;
  }
</style>
</head>
<body>
<header>Gerador de JSON - Atacad√£o Pneus</header>
<main>
  <label>Nome do Produto</label>
  <input id="name" placeholder="Ex: PNEU 215/30R20 82W LINGLONG SPORT MASTER">

  <label>Pre√ßo unit√°rio (R$)</label>
  <input id="price" placeholder="Ex: 522.49" type="number" step="0.01">

  <label>Descri√ß√£o</label>
  <textarea id="description" placeholder="Descri√ß√£o do produto..."></textarea>

  <label>Imagem (cole em Base64)</label>
  <textarea id="img" placeholder="data:image/jpeg;base64,..."></textarea>

  <label>Op√ß√µes de quantidade</label>
  <input id="opt1" placeholder="Ex: 1">
  <input id="opt2" placeholder="Ex: 2">
  <input id="opt3" placeholder="Ex: 4">

  <div id="calc" class="calc" style="display:none;"></div>

  <div class="buttons">
    <button onclick="gerarJSON()">Gerar JSON</button>
    <button class="btn-copy" onclick="copiarJSON()">Copiar JSON</button>
    <button class="btn-download" onclick="baixarJSON()">Baixar JSON</button>
  </div>

  <pre id="saida"></pre>
</main>

<script>
function gerarJSON() {
  const name = document.getElementById('name').value.trim() || "Produto sem nome";
  const price = parseFloat(document.getElementById('price').value) || 0;
  const description = document.getElementById('description').value.trim() || "";
  const img = document.getElementById('img').value.trim() || "";
  
  const quantidades = [
    parseInt(document.getElementById('opt1').value) || 1,
    parseInt(document.getElementById('opt2').value) || 2,
    parseInt(document.getElementById('opt3').value) || 4
  ];

  const opcoes = quantidades.map(q => ({
    nome: `${q} unidade${q > 1 ? 's' : ''}`,
    quantidade: q,
    total: (price * q).toFixed(2)
  }));

  const json = {
    name,
    price: price.toFixed(2),
    description,
    condicao: "Meia vida",
    options: opcoes,
    img
  };

  // Exibe calculadora
  let htmlCalc = "<strong>üí∞ Tabela de Pre√ßos:</strong><br>";
  opcoes.forEach(o => {
    htmlCalc += `${o.nome}: R$ ${o.total}<br>`;
  });
  const calcDiv = document.getElementById('calc');
  calcDiv.innerHTML = htmlCalc;
  calcDiv.style.display = "block";

  // Mostra JSON formatado
  document.getElementById('saida').textContent = JSON.stringify(json, null, 2);
}

function copiarJSON() {
  const texto = document.getElementById('saida').textContent;
  if (!texto) return alert('Gere o JSON primeiro!');
  navigator.clipboard.writeText(texto);
  alert('‚úÖ JSON copiado com sucesso!');
}

function baixarJSON() {
  const texto = document.getElementById('saida').textContent;
  if (!texto) return alert('Gere o JSON primeiro!');
  const blob = new Blob([texto], { type: 'application/json' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'produto.json';
  link.click();
}
</script>
</body>
</html>
