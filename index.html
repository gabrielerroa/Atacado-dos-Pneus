<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Produto</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; background:#f5f5f5; }
.container { max-width:500px; margin:0 auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
img { width:100%; height:auto; border-radius:10px; }
h2 { margin-top:10px; color:#333; }
p { color:#555; margin:5px 0; }
.info { font-weight:bold; margin-top:5px; }

select {
    width: 100%;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin-top: 10px;
    font-size: 16px;
}

button.whatsapp {
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:5px;
    background:#25D366;
    color:#fff;
    cursor:pointer;
    margin-top:15px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
}
button.whatsapp:hover { background:#1ebe5b; }
</style>
</head>
<body>

<div class="container" id="productContainer"></div>

<script>
const productContainer = document.getElementById('productContainer');
const product = JSON.parse(localStorage.getItem('selectedProduct'));

// Teste local caso n√£o exista produto no localStorage
if(!product){
    localStorage.setItem('selectedProduct', JSON.stringify({
        "name": "PNEU 215/30R20 82W LINGLONG SPORT MASTER",
        "price": "522.49",
        "description": "Pneu de alta performance para carros de passeio, durabilidade garantida.",
        "condicao": "Meia vida",
        "options": [
            {"nome": "unidade", "quantidade": 1},
            {"nome": "unidade", "quantidade": 4}
        ],
        "img": "https://via.placeholder.com/400x300"
    }));
    location.reload();
}

if(product){
    const phoneNumber = "556193995989";
    let selectedOption = product.options ? product.options[0] : {nome: "unidade", quantidade: 1};

    function updateWhatsAppLink(){
        const encodedMessage = encodeURIComponent(
            `Ol√°! Tenho interesse neste produto: ${product.name}\n` +
            `Pre√ßo: R$ ${product.price}\n` +
            `Condi√ß√£o: ${product.condicao}\n` +
            `Quantidade: ${selectedOption.quantidade} ${selectedOption.nome}\n` +
            `Pode me dar mais informa√ß√µes?`
        );
        return `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
    }

    productContainer.innerHTML = `
        <img src="${product.img}" alt="${product.name}">
        <h2>${product.name}</h2>
        <p class="info">Pre√ßo: R$ ${product.price}</p>
        <p class="info">Condi√ß√£o: ${product.condicao}</p>
        ${product.description ? `<p class="info">Descri√ß√£o: ${product.description}</p>` : ''}

        <label for="quantidade"><strong>Escolha a quantidade:</strong></label>
        <select id="quantidade">
            ${product.options.map((opt, idx) => `<option value="${idx}">${opt.quantidade} ${opt.nome}</option>`).join('')}
        </select>

        <button class="whatsapp" id="whatsappBtn">
            üí¨ Falar no WhatsApp
        </button>
    `;

    const quantidadeSelect = document.getElementById('quantidade');
    const whatsappBtn = document.getElementById('whatsappBtn');

    quantidadeSelect.addEventListener('change', e => {
        selectedOption = product.options[e.target.value];
    });

    whatsappBtn.addEventListener('click', ()=>{
        window.open(updateWhatsAppLink(), '_blank');
    });
}else{
    productContainer.innerHTML = "<p>Nenhum produto selecionado.</p>";
}
</script>

</body>
</html>
