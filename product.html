<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Produto</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; background:#f5f5f5; }
.container { max-width:500px; margin:0 auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
img { width:100%; height:auto; border-radius:10px; }
h2 { margin-top:10px; color:#333; }
p { color:#555; margin:5px 0; }
.info { font-weight:bold; margin-top:5px; }
ul { margin-top:10px; padding-left:20px; color:#444; }
button.whatsapp {
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:5px;
    background:#25D366;
    color:#fff;
    cursor:pointer;
    margin-top:15px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
}
button.whatsapp:hover { background:#1ebe5b; }
</style>
</head>
<body>

<div class="container" id="productContainer"></div>

<script>
const productContainer = document.getElementById('productContainer');
const product = JSON.parse(localStorage.getItem('selectedProduct'));

// Dados de exemplo se o localStorage estiver vazio
if(!product){
    localStorage.setItem('selectedProduct', JSON.stringify({
        name: "Produto Exemplo",
        img: "https://via.placeholder.com/400x300",
        price: "R$ 100,00",
        description: "Produto em Ã³timo estado.",
        condicao: "Meia vida",
        options: [
            { nome: "Pneu dianteiro", quantidade: 4 },
            { nome: "Pneu traseiro", quantidade: 2 }
        ]
    }));
    location.reload();
}

if(product){
    const phoneNumber = "556193995989";
    const condicaoFixa = "Meia vida";

    // Cria a lista de opÃ§Ãµes, se existirem
    let optionsListHTML = "";
    if(product.options && product.options.length > 0){
        optionsListHTML = `
            <ul>
                ${product.options.map(opt => `<li>${opt.nome} â€” ${opt.quantidade} un.</li>`).join('')}
            </ul>
        `;
    }

    // Monta o HTML do produto
    productContainer.innerHTML = `
        <img src="${product.img}" alt="${product.name}">
        <h2>${product.name}</h2>
        <p class="info">PreÃ§o: ${product.price || "â€”"}</p>
        <p class="info">CondiÃ§Ã£o: ${condicaoFixa}</p>
        ${product.description ? `<p class="info">DescriÃ§Ã£o: ${product.description}</p>` : ''}
        ${optionsListHTML}
        <button class="whatsapp" id="whatsappBtn">ðŸ’¬ Falar no WhatsApp</button>
    `;

    // Gera a mensagem de WhatsApp
    function generateWhatsAppMessage(){
        let optionsText = "";
        if(product.options && product.options.length > 0){
            optionsText = product.options.map(opt => `${opt.nome}: ${opt.quantidade} un.`).join(", ");
        }
        return `OlÃ¡! Tenho interesse neste produto:\n` +
               `Produto: ${product.name}\n` +
               `PreÃ§o: ${product.price || "â€”"}\n` +
               `CondiÃ§Ã£o: ${condicaoFixa}\n` +
               (optionsText ? `OpÃ§Ãµes: ${optionsText}\n` : "") +
               (product.description ? `DescriÃ§Ã£o: ${product.description}` : "");
    }

    // Abre WhatsApp com mensagem
    document.getElementById('whatsappBtn').addEventListener('click', ()=>{
        const message = encodeURIComponent(generateWhatsAppMessage());
        const link = `https://wa.me/${phoneNumber}?text=${message}`;
        window.open(link, '_blank');
    });

}else{
    productContainer.innerHTML = "<p>Nenhum produto selecionado.</p>";
}
</script>

</body>
</html>
